<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="stortingscrape">
<title>stortingscrape: An R package for accessing data from the Norwegian parliament • stortingscrape</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="stortingscrape: An R package for accessing data from the Norwegian parliament">
<meta property="og:description" content="stortingscrape">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">stortingscrape</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/stortingscrape.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/martigso/stortingscrape/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>stortingscrape: An R package for accessing data from the Norwegian parliament</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/martigso/stortingscrape/blob/HEAD/vignettes/stortingscrape.Rmd" class="external-link"><code>vignettes/stortingscrape.Rmd</code></a></small>
      <div class="d-none name"><code>stortingscrape.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="sec:intro">Introduction: Retrieval of Storting data in R<a class="anchor" aria-label="anchor" href="#sec:intro"></a>
</h2>
<p>A wide variety of parliamentary data have been made available to the
public in several countries over the last decade. Be it through frontend
websites or back-end APIs, researchers on parliaments have never had
easier access to large amounts of data than they do now. However, both
frontend and API scraped data often come in formats (.html, .xml, .json,
etc) that require substantial structuring and pre-processing before they
are ready for subsequent analyses.</p>
<p>In this vignette, I present the <code>stortingscrape</code> package
for R. <code>stortingscrape</code> makes retrieving data from the
Norwegian parliament (<em>Stortinget</em>) through their easily
accessible back-end API. The data requested using the package require
little to no further structuring. The scope of the package, discussed
further below, ranges from general data on the parliament itself (rules,
session info, committees, etc) to data on the parties, bibliographies of
the MPs, questions, hearings, debates, votes, and more.</p>
<p>Although this is the first attempt to make data on
<em>Stortinget</em> more easily accessible, <code>stortingscrape</code>
does not live in a vacuum. A variety of parliamentary data for different
countries are available for researchers to use freely. For parliamentary
debates, <span class="citation">Thomas, Pang, and Lee (2006)</span> were
one of the first to gather and make available data. Their data cover the
proceedings of the 2005 House debates. <span class="citation">Eggers and
Spirling (2014)</span> structured the UK Hansard speech data, which
spans from 1802 to 2010. <span class="citation">Beelen et al.
(2017)</span> provided continuously updated data for the Canadian
parliament, <span class="citation">Rauh and Schwalbach (2020)</span>
made available a collection of speech data from 9 countries, and <span class="citation">Turner-Zwinkels et al. (2021)</span> developed a
day-by-day dataset of MPs in Germany, Switzerland, and the Netherlands,
in the period between 1947 and 2017. These examples are, however,
different from <code>stortingscrape</code> in that they are finished
datasets ready for download and have limited scope.</p>
<p>The main goal of <code>stortingscrape</code> is to allow researchers
to access any data from the Norwegian parliament easily, but also still
be able to structure the data according to ones need. Most importantly,
the package is facilitated for weaving together different parts of the
data.stortinget.no API.</p>
<p>I will start this vignette by briefly discussing the openly
accessible data.stortinget.no API. Next, I will describe the philosophy,
scope and general usage of the <code>stortingscrape</code> package.
Finally, I will present some minimal examples of possible workflows for
working with the package, before I summarize.</p>
</div>
<div class="section level2">
<h2 id="sec:api">Stortinget’s API<a class="anchor" aria-label="anchor" href="#sec:api"></a>
</h2>
<p>The Norwegian parliament was comparatively early in granting open
access to their data through an API when they launched <a href="https://data.stortinget.no" class="external-link">data.stortinget.no</a> in 2012. The
general purpose of the API is to priovide transparency in the form om
raw data, mirroring the frontend web-page information from <a href="https://stortinget.no" class="external-link">stortinget.no</a>. The format of the API
has been fairly consistent over the time of its existance, but there
have been some small style changes over different versions.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;See &lt;code&gt;&lt;a href="../reference/get_publication.html"&gt;stortingscrape::get_publication()&lt;/a&gt;&lt;/code&gt; for
instance&lt;/p&gt;'><sup>1</sup></a>
<code>stortingscrape</code> was built under version <span class="math inline">\(1.6\)</span> of the API.</p>
<p>Except for content that is blocked for the public (e.g. debates
behind closed doors), the API contains all recorded data produced in
Stortinget. These data include data on individual MPs, transcripts from
debates, voting results, hearing input, and much more. For a exhaustive
list of all data sources in the API.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;See &lt;a href="https://martigso.github.io/stortingscrape/functions.html" class="uri"&gt;https://martigso.github.io/stortingscrape/functions.html&lt;/a&gt;&lt;/p&gt;'><sup>2</sup></a> The data available in the API can be
accessed through XML of JSON format<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;&lt;code&gt;stortingscrape&lt;/code&gt; exclusively works with
XML.&lt;/p&gt;"><sup>3</sup></a>, both of which are flexible formats for
compressing data in nested lists.</p>
<p>As an exmple, the raw data input for general information about a
single MP<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;&lt;code&gt;stortingscrape::get_mp("MAAA")&lt;/code&gt;&lt;/p&gt;'><sup>4</sup></a> looks like this:</p>
<pre><code><span><span class="co">#&gt; &lt;person&gt;</span></span>
<span><span class="co">#&gt;   &lt;respons_dato_tid&gt;2021-08-13T14:59:48.2114895+02:00&lt;/respons_dato_tid&gt;</span></span>
<span><span class="co">#&gt;   &lt;versjon&gt;1.6&lt;/versjon&gt;</span></span>
<span><span class="co">#&gt;   &lt;doedsdato&gt;0001-01-01T00:00:00&lt;/doedsdato&gt;</span></span>
<span><span class="co">#&gt;   &lt;etternavn&gt;Aasen&lt;/etternavn&gt;</span></span>
<span><span class="co">#&gt;   &lt;foedselsdato&gt;1967-02-21T00:00:00&lt;/foedselsdato&gt;</span></span>
<span><span class="co">#&gt;   &lt;fornavn&gt;Marianne&lt;/fornavn&gt;</span></span>
<span><span class="co">#&gt;   &lt;id&gt;MAAA&lt;/id&gt;</span></span>
<span><span class="co">#&gt;   &lt;kjoenn&gt;kvinne&lt;/kjoenn&gt;</span></span>
<span><span class="co">#&gt; &lt;/person&gt;</span></span></code></pre>
<p>This is the typical XML structure in the API, although other parts of
the data are more complex in that the XML tree can be nested multiple
times. This will be discussed further in the next section.</p>
</div>
<div class="section level2">
<h2 id="sec:scope">Package philosophy, scope, and usage<a class="anchor" aria-label="anchor" href="#sec:scope"></a>
</h2>
<p><code>stortingscrape</code> aims to make Norwegian parliamentary data
easily accessible, while also being flexible enough for tailoring the
different underlying data sources to ones needs. Indeed, contrary to
most open source parliamentary speech data, <code>stortingscrape</code>
aims at giving the user as much agency as possible in tailoring data for
specific needs. In addition to user agency, the package is built with a
core philosophy of simplifying data structures, make seamless workflows
between different parts of the <em>Storting</em> API, and limit data
duplication between functions.</p>
<p>Because a lot of analysis tools in R requires 2 dimensional data
formats, the <code>stortingscrape</code> package prioritize converting
the nested XML format to data frames, when possible. However, some
sources of data from the Storting API are nested in a way which makes
retaining all data in a 2 dimensional space either impossible or too
verbose. For example, the <code><a href="../reference/get_mp_bio.html">get_mp_bio()</a></code> function, which
extract a specific MP’s biography by id, has data on MP personalia,
parliamentary periods the MP had a seat, vocations, literature authored
by the MP, and more. In order to make all these data workable, the
resulting format from the function call is a list of data frames for
each part of the data. The different list elements are, however, easily
combined for different applications of the data.</p>
<p>One of the core thoughts behind the workflow of the package is to
make it easy to combine different parts of the API and to extract the
data you actually need. To facilitate this, most functions within
<code>stortingscrape</code> are built to work seemlessly with the
<code><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply()</a></code> family or control flow constructs in R. Because we
do not want to call the API repeatedly, functions that are expected to
often be ran repeatedly have a <code>good_manners</code> argument. This
will make R sleep for the set amount of seconds after calling the API.
It is recommended to set this argument to 2 seconds or higher on
multiple calls to the API. Generally, the package is built by the
recommendations given by the <code>httr2</code> package <span class="citation">(Wickham 2023)</span><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Especially, see &lt;a href="https://httr2.r-lib.org/articles/wrapping-apis.html" class="external-link uri"&gt;https://httr2.r-lib.org/articles/wrapping-apis.html&lt;/a&gt;&lt;/p&gt;'><sup>5</sup></a>.</p>
<p>Most of the data from Stortinget’s API and frontend web page are
interconnected through ids for the various sources (session id, MP id,
case id, question id, vote id, etc.). <code>stortingscrape</code> core
extraction methods are based around these. One of the major benefits of
this is that whether you want to extract, for instance, a single
question found on the frontend web page, or all questions for a
parliamentary session, the package is flexible enough to suit both needs
(see the <a href="#workflow">workflow</a> section). It will also enable
users to quickly retreive data from the frontend web-page.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;&lt;a href="https://stortinget.no" class="external-link"&gt;stortinget.no&lt;/a&gt; as the
ids are embedded in the urls.&lt;/p&gt;'><sup>6</sup></a></p>
<p>Because of the interconnectedness of the API’s data, there are some
overlapping sources of data. For instance, both retreival of MP general
information (<code><a href="../reference/get_mp.html">get_mp()</a></code>), biography
(<code><a href="../reference/get_mp_bio.html">get_mp_bio()</a></code>), and all MPs for a session
(<code><a href="../reference/get_parlperiod_mps.html">get_parlperiod_mps()</a></code>) have the name of the MP in the API,
but only <code><a href="../reference/get_mp.html">get_mp()</a></code> will return MP names in
<code>stortingscrape</code>, because these two data sources are easily
merged by the MP’s id (see the <a href="#workflow">workflow</a>
section).</p>
<p>The scope of <code>stortingscrape</code> is almost the entire API of
Stortinget, with some notable shortcomings. First, there are no
functions for dynamically updated data sources, such as current speaker
lists (<a href="https://data.stortinget.no/dokumentasjon-og-hjelp/talerliste/" class="external-link uri">https://data.stortinget.no/dokumentasjon-og-hjelp/talerliste/</a>).
Second, as mentioned above, duplicated data i avoided whenever possible.
Third, certain unstandardized image sources – such as publication
attachment figures – are not supported in the package. And finally,
publications from the <code><a href="../reference/get_publication.html">get_publication()</a></code> function can be
retrieved, but are returned in a parsed XML data format from the
<code>rvest</code> package because these data are not standardized
across different publications.</p>
<!-- % The various sources touched by the various functions in `stortingscrape` can -->
<!-- % best be summarized as a network of interconnected nodes, as shown in figure -->
<!-- % \ref{fig:flowchart} -->
<!-- % -->
<!-- % \input{./flowchart.tex} -->
<!-- % -->
<!-- % As is shown in figure [fixme: figure ref], -->
<p>There are three overarching sources of data in
<code>stortingscrape</code>: 1) Parliamentary structure data, 2) MP
data, and 3) Parliamentary activity data. These are, in some/most cases,
linked by various forms of ID tags. For example, retrieving all MPs for
a given session (<code><a href="../reference/get_parlperiod_mps.html">get_parlperiod_mps()</a></code>) will give access to
MP IDs (<code>mp_id</code>) for that session, which can be used to
extract biographies, pictures, speech activity, and more for those MPs.
Next, I will showcase some examples of how a typical workflow for using
<code>stortingscrape</code> could look like.</p>
</div>
<div class="section level2">
<h2 id="sec:workflow">Workflow<a class="anchor" aria-label="anchor" href="#sec:workflow"></a>
</h2>
<p>In the following section, I will discuss some examples of data
extraction with <code>stortingscrape</code>. I start by showing basic
extraction of voting data based on vote IDs from the frontend web-page –
<a href="https://stortinget.no" class="external-link">stortinget.no</a>. Next, I exemplify the
large set of period and session specific data by retrieving all MPs for
a specific parliamentary period and all interpellations for a specified
parliamentary session. Finally, I show how the different functions of
the <code>stortingscrape</code> package works together – merging data on
cases with their belonging vote results. Note that the vignette is built
using the examples in the data folder of the package.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;This is done in order to not call the API each time the
vignette is built.&lt;/p&gt;"><sup>7</sup></a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"stortingscrape"</span><span class="op">)</span><span class="op">$</span><span class="va">results</span><span class="op">[</span>,<span class="st">"Item"</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>list <span class="op">=</span> <span class="va">data_files</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="basic-extraction">Basic extraction<a class="anchor" aria-label="anchor" href="#basic-extraction"></a>
</h3>
<p>The basic extraction of specific data from Stortinget’s API revolves
around various forms of ID tags. For example, all MPs have a unique ID,
all cases have unique IDs, all votes have unique IDs, and so on. For the
following example, I will highlight going from a case on economic
measures for the Covid pandemic to party distribution on a specific vote
in this case. First, the case was relatively rapidly proposed and
treated in the Storting during the early days of June 2021. The case in
its entirety can be found at <a href="https://stortinget.no/no/Saker-og-publikasjoner/Saker/Sak/?p=85196" class="external-link">here</a>.
You will see the procedure steps from a government proposal, through
work in the finance committee, to debate and decision. Lets say a
particular proposal under the case caught our eye – for instance, <a href="https://stortinget.no/no/Saker-og-publikasjoner/Saker/Sak/Voteringsoversikt/?p=85196&amp;dnid=1" class="external-link">vote
number 61 from the Labor Party</a> asking the government to propose a
plan for implementing the International Labor Organization’s core
conventions to the Human Rights Act (menneskerettighetsloven).</p>
<p>As can be seen from the link to the case itself, we have an ID within
the URL: “85196”. This is the case ID. We can use the
<code><a href="../reference/get_case.html">get_case()</a></code> function from <code>stortingscrape</code> to
extract all votes on this case:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## covid_relief &lt;- get_vote("85196")</span></span></code></pre></div>
<p>We now have a data frame with 71 votes over 22 variables. The data
structure for some selected variables, looks like this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">covid_relief</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"case_id"</span>, <span class="st">"vote_id"</span>, <span class="st">"n_for"</span>, <span class="st">"n_against"</span>, <span class="st">"adopted"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;   case_id vote_id n_for n_against adopted</span></span>
<span><span class="co">#&gt; 1   85196   17631     1        87   false</span></span>
<span><span class="co">#&gt; 2   85196   17632     6        81   false</span></span>
<span><span class="co">#&gt; 3   85196   17633    14        74   false</span></span>
<span><span class="co">#&gt; 4   85196   17634    42        46   false</span></span>
<span><span class="co">#&gt; 5   85196   17635    40        48   false</span></span>
<span><span class="co">#&gt; 6   85196   17636    15        73   false</span></span></code></pre></div>
<p>As we are interested in the result of proposal 217 from the Labor
Party, we can extract the ID of this particular vote from our data:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">covid_relief</span><span class="op">$</span><span class="va">vote_id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"217"</span>, <span class="va">covid_relief</span><span class="op">$</span><span class="va">vote_topic</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>To get the personal MP vote results for this particular vote, we can
use the <code><a href="../reference/get_result_vote.html">get_result_vote()</a></code> function:<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;I have not decided if data values should be translated
or not. In this case, “for” is “for”, “mot” is “against”, and
“ikke_tilstede” is “absent”.}&lt;/p&gt;"><sup>8</sup></a></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## covid_relief_result &lt;- get_result_vote("17689")</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">covid_relief_result</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vote_id"</span>, <span class="st">"mp_id"</span>, <span class="st">"party_id"</span>, <span class="st">"vote"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;   vote_id mp_id party_id          vote</span></span>
<span><span class="co">#&gt; 1   17689   SSA        H           mot</span></span>
<span><span class="co">#&gt; 2   17689   EAG        H ikke_tilstede</span></span>
<span><span class="co">#&gt; 3   17689   PTA      FrP           mot</span></span>
<span><span class="co">#&gt; 4   17689   DTA        A ikke_tilstede</span></span>
<span><span class="co">#&gt; 5   17689  KAAN       SV           for</span></span>
<span><span class="co">#&gt; 6   17689  KAND       Sp           for</span></span></code></pre></div>
<p>From looking only at the first six rows of the data, the readers who
know the Norwegian political system will suspect that this vote was an
opposition versus government vote, but we can also easily get the
distribution of votes by party:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">covid_relief_result</span><span class="op">$</span><span class="va">party_id</span>, </span>
<span>      <span class="va">covid_relief_result</span><span class="op">$</span><span class="va">vote</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/addmargins.html" class="external-link">addmargins</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;      </span></span>
<span><span class="co">#&gt;       for ikke_tilstede mot Sum</span></span>
<span><span class="co">#&gt;   A    27            21   0  48</span></span>
<span><span class="co">#&gt;   FrP   0            12  14  26</span></span>
<span><span class="co">#&gt;   H     0            22  23  45</span></span>
<span><span class="co">#&gt;   KrF   0             5   3   8</span></span>
<span><span class="co">#&gt;   MDG   1             0   0   1</span></span>
<span><span class="co">#&gt;   R     1             0   0   1</span></span>
<span><span class="co">#&gt;   Sp    8            12   0  20</span></span>
<span><span class="co">#&gt;   SV    5             6   0  11</span></span>
<span><span class="co">#&gt;   Uav   0             0   1   1</span></span>
<span><span class="co">#&gt;   V     0             5   3   8</span></span>
<span><span class="co">#&gt;   Sum  42            83  44 169</span></span></code></pre></div>
<p>As suspected, the vote was divided between the opposition (A, MDG, R,
SP, and SV) and government parties (H, KrF, V, and FrP), and was not
adopted by a thin margin of 2 votes. Of course, this is a minimal
example, but I will highlight more methods for extracting multiple votes
below.</p>
</div>
<div class="section level3">
<h3 id="sequences-of-data-extraction">Sequences of data extraction<a class="anchor" aria-label="anchor" href="#sequences-of-data-extraction"></a>
</h3>
<p>Below, I show two examples of sequentially extracting data of
interest.</p>
<div class="section level4">
<h4 id="example-1-from-periods-to-interpellations">Example 1: From periods to interpellations<a class="anchor" aria-label="anchor" href="#example-1-from-periods-to-interpellations"></a>
</h4>
<p>Most of the mentioned IDs for Stortinget’s data are not only
extractable from the frontend web-page, but also from the back-end API.
These data can be retrieved by various forms of parliamentary period or
session specific functions in <code>stortingscrape</code>. In this
section, I will show how to get all MPs for a specific parliamentary
period and all interpellations for a parliamentary session.</p>
<p>First, however, I note that IDs for periods and sessions are accessed
through two core functions in the package:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## parl_periods &lt;- get_parlperiods()</span></span>
<span><span class="co">## parl_sessions &lt;- get_parlsessions()</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">parl_periods</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"years"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;         id     years</span></span>
<span><span class="co">#&gt; 15 1965-69 1965-1969</span></span>
<span><span class="co">#&gt; 16 1961-65 1961-1965</span></span>
<span><span class="co">#&gt; 17 1958-61 1958-1961</span></span>
<span><span class="co">#&gt; 18 1954-57 1954-1958</span></span>
<span><span class="co">#&gt; 19 1950-53 1950-1954</span></span>
<span><span class="co">#&gt; 20 1945-49 1945-1950</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">parl_sessions</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"years"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;         id     years</span></span>
<span><span class="co">#&gt; 34 1991-92 1991-1992</span></span>
<span><span class="co">#&gt; 35 1990-91 1990-1991</span></span>
<span><span class="co">#&gt; 36 1989-90 1989-1990</span></span>
<span><span class="co">#&gt; 37 1988-89 1988-1989</span></span>
<span><span class="co">#&gt; 38 1987-88 1987-1988</span></span>
<span><span class="co">#&gt; 39 1986-87 1986-1987</span></span></code></pre></div>
<p>The parliamentary period IDs is mainly used for MP data; Norwegian
MPs are elected for 4 year terms, with no constitutional arrangement for
snap elections. The MP data also stretch way further back in time than
most of the other data in the API:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">parl_periods</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">parl_periods</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "1945-49"</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## mps4549 &lt;- get_parlperiod_mps("1945-49")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mps4549</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mp_id"</span>, <span class="st">"county_id"</span>, <span class="st">"party_id"</span>, <span class="st">"period_id"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;   mp_id county_id party_id period_id</span></span>
<span><span class="co">#&gt; 1  AAKU        VA        A   1945-49</span></span>
<span><span class="co">#&gt; 2  AARY        AA        A   1945-49</span></span>
<span><span class="co">#&gt; 3  ALKJ        He        H   1945-49</span></span>
<span><span class="co">#&gt; 4  ALVÅ        Fi      NKP   1945-49</span></span>
<span><span class="co">#&gt; 5  AMSK        ST        A   1945-49</span></span>
<span><span class="co">#&gt; 6  ANBØ        SF        V   1945-49</span></span></code></pre></div>
<p>From these data, the way is short to extracting more rich data on
individual MPs, as will be demonstrated below.</p>
<p>Content data, however, use parliamentary session IDs rather than
period IDs. These functions are standardized to function names as
<code>get_session_*()</code>. For example, we can access all
interpellations from the 2002-2003 session with the
<code><a href="../reference/get_session_questions.html">get_session_questions()</a></code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## interp0203 &lt;- get_session_questions("2002-2003", q_type = "interpellasjoner")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">interp0203</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 22 26</span></span></code></pre></div>
<p>Here, we have 22 interpellations over 26 different variables.
Unfortunately, the API only gives the question and not the answer for
the different types of question requests. Retrieval of question answers
is a daunting task, because it is only accessible through the
unstandardized <code><a href="../reference/get_publication.html">get_publication()</a></code> function.</p>
</div>
</div>
<div class="section level3">
<h3 id="example-2-from-cases-to-mp-vote-results">Example 2: From cases to MP vote results<a class="anchor" aria-label="anchor" href="#example-2-from-cases-to-mp-vote-results"></a>
</h3>
<p>Next, I showcase how to get go from cases in a section, through
extracting a case of interest and vote results, to vote matrices for
that case.</p>
<p>First, I extract all cases in the 2019-2020 session:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## cases &lt;- get_session_cases("2019-2020")</span></span></code></pre></div>
<p>The <code>cases</code> object will here contain all cases treated in
the 2019-2020 parliamentary session. Do note that <code>cases</code> is
a list of 4 elements (<code>$root</code>, <code>$topics</code>,
<code>$proposers</code>, and <code>$spokespersons</code>). In the
following, I use the case ID in <code>$root</code> to access vote
information for a case – in this example the 48th row in the data:<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;I will note that it is possible to extract vote
information on all cases by either using the &lt;code&gt;&lt;a href="https://rdrr.io/r/base/apply.html" class="external-link"&gt;apply()&lt;/a&gt;&lt;/code&gt; family
or control flow constructs available in R. However, in this case,
calling the API 616 (&lt;code&gt;nrow(cases[["root"]])&lt;/code&gt;) times, will
require to pause between calls (with the {&lt;code&gt;good_manners&lt;/code&gt;
argument). This will increase running time substantially.&lt;/p&gt;'><sup>9</sup></a></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># The case titles are, unfortunately, not translated</span></span>
<span><span class="va">cases</span><span class="op">$</span><span class="va">root</span><span class="op">$</span><span class="va">title_short</span><span class="op">[</span><span class="fl">48</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "Representantforslag om å reversere avgiftsøkninger på alkoholfrie drikkevarer og bevare arbeidsplasser i norsk næringsmiddelindustri og varehandel"</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## vote &lt;- get_vote(cases$root$id[48])</span></span>
<span></span>
<span><span class="va">vote</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"case_id"</span>, <span class="st">"vote_id"</span>, </span>
<span>         <span class="st">"alternative_vote"</span>, </span>
<span>         <span class="st">"n_for"</span>, <span class="st">"n_absent"</span>, <span class="st">"n_against"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;   case_id vote_id alternative_vote n_for n_absent n_against</span></span>
<span><span class="co">#&gt; 1   78686   15404               -1     1       82        86</span></span>
<span><span class="co">#&gt; 2   78686   15405            15406    46       82        41</span></span>
<span><span class="co">#&gt; 3   78686   15406            15405    41       82        46</span></span></code></pre></div>
<p>The output gives us a data frame of three votes over 22 variables,
whereof one is the vote ID for each of the votes. We can use this
variable to retrieve rollcall data, using the
<code>get_result_vote</code> function:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## vote_result &lt;- lapply(vote$vote_id, get_result_vote, good_manners = 5)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vote_result</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">vote</span><span class="op">$</span><span class="va">vote_id</span></span>
<span></span>
<span><span class="va">vote_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">vote_result</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">vote_result</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">vote_result</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;         vote_id mp_id party_id          vote permanent_sub_for sub_for</span></span>
<span><span class="co">#&gt; 15404.1   15404   SSA        H           mot              &lt;NA&gt;    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15404.2   15404   EAG        H           mot              &lt;NA&gt;    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15404.3   15404   PTA      FrP           mot              &lt;NA&gt;    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15404.4   15404   DTA        A           mot              &lt;NA&gt;    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15404.5   15404  KAAN       SV           mot              &lt;NA&gt;    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15404.6   15404   MAA       Sp ikke_tilstede              &lt;NA&gt;    &lt;NA&gt;</span></span></code></pre></div>
<p>And make an overall proportion table over party distribution for the
three votes:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">vote_result</span><span class="op">$</span><span class="va">vote</span>, <span class="va">vote_result</span><span class="op">$</span><span class="va">party_id</span>,</span>
<span>      dnn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Vote result"</span>, <span class="st">"Vote ID"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="sec:summary">Summary<a class="anchor" aria-label="anchor" href="#sec:summary"></a>
</h2>
<p>In this vignette, I have presented the philosophy, scope, usage, and
workflow of the <code>stortingscrape</code> package for R. In sum,
<code>stortingscrape</code> makes retrieving data from the Norwegian
parliament (<em>Stortinget</em>) more accessible through the back-end
API (<a href="https://data.stortinget.no" class="external-link">data.stortinget.no</a>). One
core philosophy of the package is to let the user tailor the data to
ones needs, while at the same time extracting minimal overlapping data.
The scope of the package ranges from general data on the parliament
itself (rules, session info, committees, etc) to data on the parties,
bibliographies of the MPs, questions, hearings, debates, votes, and
more.</p>
<!-- # Computational details -->
</div>
<div class="section level2">
<h2 id="app:functions">List of functions<a class="anchor" aria-label="anchor" href="#app:functions"></a>
</h2>
<p>A list of all functions and their description can be found in the
package documentation within R or from <a href="https://martigso.github.io/stortingscrape/functions.html">github</a>.</p>
</div>
<div class="section level2">
<h2 id="bibliography">Bibliography<a class="anchor" aria-label="anchor" href="#bibliography"></a>
</h2>
<font size="3">
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Bee:Thi:Alb:17" class="csl-entry">
Beelen, Kaspar, Timothy Alberdingk Thijm, Christopher Cochrane, Kees
Halvemaan, Graeme Hirst, Michael Kimmins, Sander Lijbrink, et al. 2017.
<span>“Digitization of the Canadian Parliamentary Debates.”</span>
<em>Canadian Journal of Political Science/Revue Canadienne de Science
Politique</em>, 1–16.
</div>
<div id="ref-Eggers2014" class="csl-entry">
Eggers, Andrew C., and Arthur Spirling. 2014. <span>“Electoral Security
as a Determinant of Legislator Activity, 1832–1918: New Data and Methods
for Analyzing British Political Development.”</span> <em>Legislative
Studies Quarterly</em> 39 (4): 593–620.
</div>
<div id="ref-Rauh2020" class="csl-entry">
Rauh, Christian, and Jan Schwalbach. 2020. <span>“<span class="nocase">The ParlSpeech V2 data set: <span>F</span>ull-text
corpora of 6.3 million parliamentary speeches in the key legislative
chambers of nine representative democracies</span>.”</span> Harvard
Dataverse. <a href="https://doi.org/10.7910/DVN/L4OAKN" class="external-link">https://doi.org/10.7910/DVN/L4OAKN</a>.
</div>
<div id="ref-Mat:Pan:Lee:06" class="csl-entry">
Thomas, Matt, Bo Pang, and Lillian Lee. 2006. <span>“Get Out the Vote:
Determining Support or Opposition from Congressional Floor-Debate
Transcripts.”</span> In <em>Proceedings of the 2006 Conference on
Empirical Methods in Natural Language Processing</em>, 327–35.
Association for Computational Linguistics.
</div>
<div id="ref-Turner-Zwinkels2021" class="csl-entry">
Turner-Zwinkels, Tomas, Oliver Huwyler, Elena Frech, Philip Manow,
Stefanie Bailer, Niels D. Goet, and Simon Hug. 2021. <span>“Parliaments
Day-by-Day: A New Open Source Database to Answer the Question of Who Was
in What Parliament, Party, and Party-Group, and When.”</span>
<em>Legislative Studies Quarterly</em>.
</div>
<div id="ref-wickham2023" class="csl-entry">
Wickham, Hadley. 2023. <em>Httr2: Perform HTTP Requests and Process the
Responses</em>. <a href="https://httr2.r-lib.org" class="external-link">https://httr2.r-lib.org</a>.
</div>
</div>
<p></p></font>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martin Søyland.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
